!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=50)}([function(t,e){t.exports=function(t,e,n,i){var r=t.transformX=function(t,o){n(t),n(o);for(var s,h,l,c=[],p=0;p<o.length;p++){for(var a=o[p],u=[],f=0;f<t.length;){var d=[];if(s=t[f],l=d,e(u,s,h=a,"left"),e(l,h,s,"right"),f++,1!==d.length){if(0===d.length){for(var v=f;v<t.length;v++)i(u,t[v]);a=null;break}for(var g=r(t.slice(f),d),y=0;y<g[0].length;y++)i(u,g[0][y]);for(var m=0;m<g[1].length;m++)i(c,g[1][m]);a=null;break}a=d[0]}null!=a&&i(c,a),t=u}return[t,c]};t.transform=function(t,n,i){if("left"!==i&&"right"!==i)throw new Error("type must be 'left' or 'right'");return 0===n.length?t:1===t.length&&1===n.length?e([],t[0],n[0],i):"left"===i?r(t,n)[0]:r(n,t)[1]}}},function(t,e,n){var i=n(53).EventEmitter;e.EventEmitter=i,e.mixin=function(t){for(var e in i.prototype)t.prototype[e]=i.prototype[e]}},function(t,e,n){t.exports={type:n(3)}},function(t,e,n){var i=function(t){return"[object Array]"==Object.prototype.toString.call(t)},r=function(t){return JSON.parse(JSON.stringify(t))},o={name:"json0",uri:"http://sharejs.org/types/JSONv0"},s={};function h(t){t.t="text0";var e={p:t.p.pop()};null!=t.si&&(e.i=t.si),null!=t.sd&&(e.d=t.sd),t.o=[e]}function l(t){t.p.push(t.o[0].p),null!=t.o[0].i&&(t.si=t.o[0].i),null!=t.o[0].d&&(t.sd=t.o[0].d),delete t.t,delete t.o}o.registerSubtype=function(t){s[t.name]=t},o.create=function(t){return void 0===t?null:r(t)},o.invertComponent=function(t){var e={p:t.p};return t.t&&s[t.t]&&(e.t=t.t,e.o=s[t.t].invert(t.o)),void 0!==t.si&&(e.sd=t.si),void 0!==t.sd&&(e.si=t.sd),void 0!==t.oi&&(e.od=t.oi),void 0!==t.od&&(e.oi=t.od),void 0!==t.li&&(e.ld=t.li),void 0!==t.ld&&(e.li=t.ld),void 0!==t.na&&(e.na=-t.na),void 0!==t.lm&&(e.lm=t.p[t.p.length-1],e.p=t.p.slice(0,t.p.length-1).concat([t.lm])),e},o.invert=function(t){for(var e=t.slice().reverse(),n=[],i=0;i<e.length;i++)n.push(o.invertComponent(e[i]));return n},o.checkValidOp=function(t){for(var e=0;e<t.length;e++)if(!i(t[e].p))throw new Error("Missing path")},o.checkList=function(t){if(!i(t))throw new Error("Referenced element not a list")},o.checkObj=function(t){if(!(e=t)||e.constructor!==Object)throw new Error("Referenced element not an object (it was "+JSON.stringify(t)+")");var e},o.apply=function(t,e){o.checkValidOp(e),e=r(e);for(var n={data:t},i=0;i<e.length;i++){var l=e[i];null==l.si&&null==l.sd||h(l);for(var c=null,p=n,a="data",u=0;u<l.p.length;u++){var f=l.p[u];if(c=p,a,p=p[a],a=f,null==c)throw new Error("Path invalid")}if(l.t&&void 0!==l.o&&s[l.t])p[a]=s[l.t].apply(p[a],l.o);else if(void 0!==l.na){if("number"!=typeof p[a])throw new Error("Referenced element not a number");p[a]+=l.na}else if(void 0!==l.li&&void 0!==l.ld)o.checkList(p),p[a]=l.li;else if(void 0!==l.li)o.checkList(p),p.splice(a,0,l.li);else if(void 0!==l.ld)o.checkList(p),p.splice(a,1);else if(void 0!==l.lm){if(o.checkList(p),l.lm!=a){var d=p[a];p.splice(a,1),p.splice(l.lm,0,d)}}else if(void 0!==l.oi)o.checkObj(p),p[a]=l.oi;else{if(void 0===l.od)throw new Error("invalid / missing instruction in op");o.checkObj(p),delete p[a]}}return n.data},o.shatter=function(t){for(var e=[],n=0;n<t.length;n++)e.push([t[n]]);return e},o.incrementalApply=function(t,e,n){for(var i=0;i<e.length;i++){var r=[e[i]];n(r,t=o.apply(t,r))}return t};var c=o.pathMatches=function(t,e,n){if(t.length!=e.length)return!1;for(var i=0;i<t.length;i++)if(t[i]!==e[i]&&(!n||i!==t.length-1))return!1;return!0};o.append=function(t,e){if(e=r(e),0!==t.length){var n=t[t.length-1];if(null==e.si&&null==e.sd||null==n.si&&null==n.sd||(h(e),h(n)),c(e.p,n.p))if(e.t&&n.t&&e.t===n.t&&s[e.t]){if(n.o=s[e.t].compose(n.o,e.o),null!=e.si||null!=e.sd){for(var i=e.p,o=0;o<n.o.length-1;o++)e.o=[n.o.pop()],e.p=i.slice(),l(e),t.push(e);l(n)}}else null!=n.na&&null!=e.na?t[t.length-1]={p:n.p,na:n.na+e.na}:void 0!==n.li&&void 0===e.li&&e.ld===n.li?void 0!==n.ld?delete n.li:t.pop():void 0!==n.od&&void 0===n.oi&&void 0!==e.oi&&void 0===e.od?n.oi=e.oi:void 0!==n.oi&&void 0!==e.od?void 0!==e.oi?n.oi=e.oi:void 0!==n.od?delete n.oi:t.pop():void 0!==e.lm&&e.p[e.p.length-1]===e.lm||t.push(e);else null==e.si&&null==e.sd||null==n.si&&null==n.sd||(l(e),l(n)),t.push(e)}else t.push(e)},o.compose=function(t,e){o.checkValidOp(t),o.checkValidOp(e);for(var n=r(t),i=0;i<e.length;i++)o.append(n,e[i]);return n},o.normalize=function(t){var e=[];t=i(t)?t:[t];for(var n=0;n<t.length;n++){var r=t[n];null==r.p&&(r.p=[]),o.append(e,r)}return e},o.commonLengthForOps=function(t,e){var n=t.p.length,i=e.p.length;if((null!=t.na||t.t)&&n++,(null!=e.na||e.t)&&i++,0===n)return-1;if(0===i)return null;n--,i--;for(var r=0;r<n;r++){var o=t.p[r];if(r>=i||o!==e.p[r])return null}return n},o.canOpAffectPath=function(t,e){return null!=o.commonLengthForOps({p:e},t)},o.transformComponent=function(t,e,n,c){e=r(e);var p=o.commonLengthForOps(n,e),a=o.commonLengthForOps(e,n),u=e.p.length,f=n.p.length;if((null!=e.na||e.t)&&u++,(null!=n.na||n.t)&&f++,null!=a&&f>u&&e.p[a]==n.p[a])if(void 0!==e.ld)(v=r(n)).p=v.p.slice(u),e.ld=o.apply(r(e.ld),[v]);else if(void 0!==e.od){(v=r(n)).p=v.p.slice(u),e.od=o.apply(r(e.od),[v])}if(null!=p){var d=u==f,v=n;if(null==e.si&&null==e.sd||null==n.si&&null==n.sd||(h(e),h(v=r(n))),v.t&&s[v.t]){if(e.t&&e.t===v.t){var g=s[e.t].transform(e.o,v.o,c);if(null!=e.si||null!=e.sd)for(var y=e.p,m=0;m<g.length;m++)e.o=[g[m]],e.p=y.slice(),l(e),o.append(t,e);else(!i(g)||g.length>0)&&(e.o=g,o.append(t,e));return t}}else if(void 0!==n.na);else if(void 0!==n.li&&void 0!==n.ld){if(n.p[p]===e.p[p]){if(!d)return t;if(void 0!==e.ld){if(void 0===e.li||"left"!==c)return t;e.ld=r(n.li)}}}else if(void 0!==n.li)void 0!==e.li&&void 0===e.ld&&d&&e.p[p]===n.p[p]?"right"===c&&e.p[p]++:n.p[p]<=e.p[p]&&e.p[p]++,void 0!==e.lm&&d&&n.p[p]<=e.lm&&e.lm++;else if(void 0!==n.ld){if(void 0!==e.lm&&d){if(n.p[p]===e.p[p])return t;y=n.p[p];var b=e.p[p];(y<(_=e.lm)||y===_&&b<_)&&e.lm--}if(n.p[p]<e.p[p])e.p[p]--;else if(n.p[p]===e.p[p]){if(f<u)return t;if(void 0!==e.ld){if(void 0===e.li)return t;delete e.ld}}}else if(void 0!==n.lm)if(void 0!==e.lm&&u===f){b=e.p[p];var _=e.lm,w=n.p[p],O=n.lm;if(w!==O)if(b===w){if("left"!==c)return t;e.p[p]=O,b===_&&(e.lm=O)}else b>w&&e.p[p]--,b>O?e.p[p]++:b===O&&w>O&&(e.p[p]++,b===_&&e.lm++),_>w?e.lm--:_===w&&_>b&&e.lm--,_>O?e.lm++:_===O&&(O>w&&_>b||O<w&&_<b?"right"===c&&e.lm++:_>b?e.lm++:_===w&&e.lm--)}else if(void 0!==e.li&&void 0===e.ld&&d){b=n.p[p],_=n.lm;(y=e.p[p])>b&&e.p[p]--,y>_&&e.p[p]++}else{b=n.p[p],_=n.lm;(y=e.p[p])===b?e.p[p]=_:(y>b&&e.p[p]--,y>_?e.p[p]++:y===_&&b>_&&e.p[p]++)}else if(void 0!==n.oi&&void 0!==n.od){if(e.p[p]===n.p[p]){if(void 0===e.oi||!d)return t;if("right"===c)return t;e.od=n.oi}}else if(void 0!==n.oi){if(void 0!==e.oi&&e.p[p]===n.p[p]){if("left"!==c)return t;o.append(t,{p:e.p,od:n.oi})}}else if(void 0!==n.od&&e.p[p]==n.p[p]){if(!d)return t;if(void 0===e.oi)return t;delete e.od}}return o.append(t,e),t},n(0)(o,o.transformComponent,o.checkValidOp,o.append);var p=n(4);o.registerSubtype(p),t.exports=o},function(t,e,n){var i=t.exports={name:"text0",uri:"http://sharejs.org/types/textv0",create:function(t){if(null!=t&&"string"!=typeof t)throw new Error("Initial data must be a string");return t||""}},r=function(t,e,n){return t.slice(0,e)+n+t.slice(e)},o=function(t){if("number"!=typeof t.p)throw new Error("component missing position field");if("string"==typeof t.i==("string"==typeof t.d))throw new Error("component needs an i or d field");if(t.p<0)throw new Error("position cannot be negative")},s=function(t){for(var e=0;e<t.length;e++)o(t[e])};i.apply=function(t,e){var n;s(e);for(var i=0;i<e.length;i++){var o=e[i];if(null!=o.i)t=r(t,o.p,o.i);else{if(n=t.slice(o.p,o.p+o.d.length),o.d!==n)throw new Error("Delete component '"+o.d+"' does not match deleted text '"+n+"'");t=t.slice(0,o.p)+t.slice(o.p+o.d.length)}}return t};var h=i._append=function(t,e){if(""!==e.i&&""!==e.d)if(0===t.length)t.push(e);else{var n=t[t.length-1];null!=n.i&&null!=e.i&&n.p<=e.p&&e.p<=n.p+n.i.length?t[t.length-1]={i:r(n.i,e.p-n.p,e.i),p:n.p}:null!=n.d&&null!=e.d&&e.p<=n.p&&n.p<=e.p+e.d.length?t[t.length-1]={d:r(e.d,n.p-e.p,n.d),p:e.p}:t.push(e)}};i.compose=function(t,e){s(t),s(e);for(var n=t.slice(),i=0;i<e.length;i++)h(n,e[i]);return n},i.normalize=function(t){var e=[];null==t.i&&null==t.p||(t=[t]);for(var n=0;n<t.length;n++){var i=t[n];null==i.p&&(i.p=0),h(e,i)}return e};var l=function(t,e,n){return null!=e.i?e.p<t||e.p===t&&n?t+e.i.length:t:t<=e.p?t:t<=e.p+e.d.length?e.p:t-e.d.length};i.transformCursor=function(t,e,n){for(var i="right"===n,r=0;r<e.length;r++)t=l(t,e[r],i);return t};var c=i._tc=function(t,e,n,i){if(o(e),o(n),null!=e.i)h(t,{i:e.i,p:l(e.p,n,"right"===i)});else if(null!=n.i){var r=e.d;e.p<n.p&&(h(t,{d:r.slice(0,n.p-e.p),p:e.p}),r=r.slice(n.p-e.p)),""!==r&&h(t,{d:r,p:e.p+n.i.length})}else if(e.p>=n.p+n.d.length)h(t,{d:e.d,p:e.p-n.d.length});else if(e.p+e.d.length<=n.p)h(t,e);else{var s={d:"",p:e.p};e.p<n.p&&(s.d=e.d.slice(0,n.p-e.p)),e.p+e.d.length>n.p+n.d.length&&(s.d+=e.d.slice(n.p+n.d.length-e.p));var c=Math.max(e.p,n.p),p=Math.min(e.p+e.d.length,n.p+n.d.length);if(e.d.slice(c-e.p,p-e.p)!==n.d.slice(c-n.p,p-n.p))throw new Error("Delete ops delete different text in the same region of the document");""!==s.d&&(s.p=l(s.p,n),h(t,s))}return t};i.invert=function(t){t=t.slice().reverse();for(var e=0;e<t.length;e++)t[e]=null!=(n=t[e]).i?{d:n.i,p:n.p}:{i:n.d,p:n.p};var n;return t},n(0)(i,c,s,h)},,function(t,e){var n,i,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function h(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var l,c=[],p=!1,a=-1;function u(){p&&l&&(p=!1,l.length?c=l.concat(c):a=-1,c.length&&f())}function f(){if(!p){var t=h(u);p=!0;for(var e=c.length;e;){for(l=c,c=[];++a<e;)l&&l[a].run();a=-1,e=c.length}l=null,p=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function v(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||p||h(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=v,r.addListener=v,r.once=v,r.off=v,r.removeListener=v,r.removeAllListeners=v,r.emit=v,r.prependListener=v,r.prependOnceListener=v,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,n){var i=new(n(54));t.exports=i},function(t,e,n){function i(t,e){i.super.call(this,e),this.code=t}n(55)(i),t.exports=i},function(t,e,n){e.defaultType=n(2).type,e.map={},e.register=function(t){t.name&&(e.map[t.name]=t),t.uri&&(e.map[t.uri]=t)},e.register(e.defaultType)},function(t,e){e.doNothing=function(){},e.hasKeys=function(t){for(var e in t)return!0;return!1},e.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},e.isValidVersion=function(t){return null===t||e.isInteger(t)&&t>=0},e.isValidTimestamp=function(t){return e.isValidVersion(t)}},,,,,,,function(t,e,n){(function(e){var i=n(1),r=n(7),o=n(8),s=n(9);function h(t,e,n){i.EventEmitter.call(this),this.connection=t,this.collection=e,this.id=n,this.version=null,this.type=null,this.data=void 0,this.inflightFetch=[],this.inflightSubscribe=[],this.inflightUnsubscribe=[],this.pendingFetch=[],this.subscribed=!1,this.wantSubscribe=!1,this.inflightOp=null,this.pendingOps=[],this.type=null,this.applyStack=null,this.preventCompose=!1}function l(t,e,n){if(e){var i=t.pop();t.push((function(t){i&&i(t),n&&n(t)}))}else t.push(n)}function c(t,e){if(t.del)return delete(n=e).op,delete n.create,void delete n.del;var n;if(e.del)return new o(4017,"Document was deleted");if(e.create)return new o(4018,"Document alredy created");if(e.op){if(t.create)return new o(4018,"Document already created");if(t.type.transformX){var i=t.type.transformX(t.op,e.op);t.op=i[0],e.op=i[1]}else{var r=t.type.transform(t.op,e.op,"left"),s=t.type.transform(e.op,t.op,"right");t.op=r,e.op=s}}}function p(t,e){for(var n=!1,i=0;i<t.length;i++){var r=t[i];r&&(r(e),n=!0)}return n}t.exports=h,i.mixin(h),h.prototype.destroy=function(t){var e=this;e.whenNothingPending((function(){e.wantSubscribe?e.unsubscribe((function(n){if(n)return t?t(n):e.emit("error",n);e.connection._destroyDoc(e),t&&t()})):(e.connection._destroyDoc(e),t&&t())}))},h.prototype._setType=function(t){if("string"==typeof t&&(t=s.map[t]),t)this.type=t;else{if(null!==t){var e=new o(4008,"Missing type "+t);return this.emit("error",e)}this.type=t,this.data=void 0}},h.prototype.ingestSnapshot=function(t,e){if(!t)return e&&e();if("number"!=typeof t.v){var n=new o(5008,"Missing version in ingested snapshot. "+this.collection+"."+this.id);return e?e(n):this.emit("error",n)}if(this.type||this.hasWritePending()){if(null==this.version){if(this.hasWritePending())return e&&this.once("no write pending",e);n=new o(5009,"Cannot ingest snapshot in doc with null version. "+this.collection+"."+this.id);return e?e(n):this.emit("error",n)}return t.v>this.version?this.fetch(e):e&&e()}if(this.version>t.v)return e&&e();this.version=t.v;var i=void 0===t.type?s.defaultType:t.type;this._setType(i),this.data=this.type&&this.type.deserialize?this.type.deserialize(t.data):t.data,this.emit("load"),e&&e()},h.prototype.whenNothingPending=function(t){var n=this;e.nextTick((function(){n.hasPending()?n.once("nothing pending",t):t()}))},h.prototype.hasPending=function(){return!!(this.inflightOp||this.pendingOps.length||this.inflightFetch.length||this.inflightSubscribe.length||this.inflightUnsubscribe.length||this.pendingFetch.length)},h.prototype.hasWritePending=function(){return!(!this.inflightOp&&!this.pendingOps.length)},h.prototype._emitNothingPending=function(){this.hasWritePending()||(this.emit("no write pending"),this.hasPending()||this.emit("nothing pending"))},h.prototype._emitResponseError=function(t,e){if(e)return e(t),void this._emitNothingPending();this._emitNothingPending(),this.emit("error",t)},h.prototype._handleFetch=function(t,e){var n=this.inflightFetch.shift();if(t)return this._emitResponseError(t,n);this.ingestSnapshot(e,n),this._emitNothingPending()},h.prototype._handleSubscribe=function(t,e){var n=this.inflightSubscribe.shift();if(t)return this._emitResponseError(t,n);this.wantSubscribe&&(this.subscribed=!0),this.ingestSnapshot(e,n),this._emitNothingPending()},h.prototype._handleUnsubscribe=function(t){var e=this.inflightUnsubscribe.shift();if(t)return this._emitResponseError(t,e);e&&e(),this._emitNothingPending()},h.prototype._handleOp=function(t,e){if(t)return this.inflightOp?(4002===t.code&&(t=null),this._rollback(t)):this.emit("error",t);if(this.inflightOp&&e.src===this.inflightOp.src&&e.seq===this.inflightOp.seq)this._opAcknowledged(e);else if(null==this.version||e.v>this.version)this.fetch();else if(!(e.v<this.version)){if(this.inflightOp)if(i=c(this.inflightOp,e))return this._hardRollback(i);for(var n=0;n<this.pendingOps.length;n++){var i;if(i=c(this.pendingOps[n],e))return this._hardRollback(i)}this.version++;try{this._otApply(e,!1)}catch(t){return this._hardRollback(t)}}},h.prototype._onConnectionStateChanged=function(){if(this.connection.canSend)this.flush(),this._resubscribe();else if(this.inflightOp&&(this.pendingOps.unshift(this.inflightOp),this.inflightOp=null),this.subscribed=!1,(this.inflightFetch.length||this.inflightSubscribe.length)&&(this.pendingFetch=this.pendingFetch.concat(this.inflightFetch,this.inflightSubscribe),this.inflightFetch.length=0,this.inflightSubscribe.length=0),this.inflightUnsubscribe.length){var t=this.inflightUnsubscribe;this.inflightUnsubscribe=[],p(t)}},h.prototype._resubscribe=function(){var t=this.pendingFetch;if(this.pendingFetch=[],this.wantSubscribe)return t.length?void this.subscribe((function(e){p(t,e)})):void this.subscribe();t.length&&this.fetch((function(e){p(t,e)}))},h.prototype.fetch=function(t){if(this.connection.canSend){var e=this.connection.sendFetch(this);l(this.inflightFetch,e,t)}else this.pendingFetch.push(t)},h.prototype.subscribe=function(t){if(this.wantSubscribe=!0,this.connection.canSend){var e=this.connection.sendSubscribe(this);l(this.inflightSubscribe,e,t)}else this.pendingFetch.push(t)},h.prototype.unsubscribe=function(t){if(this.wantSubscribe=!1,this.subscribed=!1,this.connection.canSend){var n=this.connection.sendUnsubscribe(this);l(this.inflightUnsubscribe,n,t)}else t&&e.nextTick(t)},h.prototype.flush=function(){this.connection.canSend&&!this.inflightOp&&!this.paused&&this.pendingOps.length&&this._sendOp()},h.prototype._otApply=function(t,e){if(t.op){if(!this.type)throw new o(4015,"Cannot apply op to uncreated document. "+this.collection+"."+this.id);if(!e&&this.type===s.defaultType&&t.op.length>1){this.applyStack||(this.applyStack=[]);for(var n=this.applyStack.length,i=0;i<t.op.length;i++){for(var r={op:[t.op[i]]},h=n;h<this.applyStack.length;h++){var l=c(this.applyStack[h],r);if(l)return this._hardRollback(l)}this.emit("before op",r.op,e),this.data=this.type.apply(this.data,r.op),this.emit("op",r.op,e)}return void this._popApplyStack(n)}return this.emit("before op",t.op,e),this.data=this.type.apply(this.data,t.op),void this.emit("op",t.op,e)}if(t.create)return this._setType(t.create.type),this.data=this.type.deserialize?this.type.createDeserialized?this.type.createDeserialized(t.create.data):this.type.deserialize(this.type.create(t.create.data)):this.type.create(t.create.data),void this.emit("create",e);if(t.del){var p=this.data;return this._setType(null),void this.emit("del",p,e)}},h.prototype._sendOp=function(){var t=this.connection.id;if(t){this.inflightOp||(this.inflightOp=this.pendingOps.shift());var e=this.inflightOp;if(!e){var n=new o(5010,"No op to send on call to _sendOp");return this.emit("error",n)}e.sentAt=Date.now(),e.retries=null==e.retries?0:e.retries+1,null==e.seq&&(e.seq=this.connection.seq++),this.connection.sendOp(this,e),null==e.src&&(e.src=t)}},h.prototype._submit=function(t,n,i){if(n||(n=!0),t.op){if(!this.type){var r=new o(4015,"Cannot submit op. Document has not been created. "+this.collection+"."+this.id);return i?i(r):this.emit("error",r)}this.type.normalize&&(t.op=this.type.normalize(t.op))}try{this._pushOp(t,i),this._otApply(t,n)}catch(t){return this._hardRollback(t)}var s=this;e.nextTick((function(){s.flush()}))},h.prototype._pushOp=function(t,e){if(this.applyStack)this.applyStack.push(t);else{var n=this._tryCompose(t);if(n)return void n.callbacks.push(e)}t.type=this.type,t.callbacks=[e],this.pendingOps.push(t)},h.prototype._popApplyStack=function(t){if(t>0)this.applyStack.length=t;else{var e=this.applyStack[0];if(this.applyStack=null,e)if(-1!==(i=this.pendingOps.indexOf(e)))for(var n=this.pendingOps.splice(i),i=0;i<n.length;i++){e=n[i];var r=this._tryCompose(e);r?r.callbacks=r.callbacks.concat(e.callbacks):this.pendingOps.push(e)}}},h.prototype._tryCompose=function(t){if(!this.preventCompose){var e=this.pendingOps[this.pendingOps.length-1];if(e)return e.create&&t.op?(e.create.data=this.type.apply(e.create.data,t.op),e):e.op&&t.op&&this.type.compose?(e.op=this.type.compose(e.op,t.op),e):void 0}},h.prototype.submitOp=function(t,e,n){"function"==typeof e&&(n=e,e=null);var i={op:t},r=e&&e.source;this._submit(i,r,n)},h.prototype.create=function(t,e,n,i){if("function"==typeof e?(i=e,n=null,e=null):"function"==typeof n&&(i=n,n=null),e||(e=s.defaultType.uri),this.type){var r=new o(4016,"Document already exists");return i?i(r):this.emit("error",r)}var h={create:{type:e,data:t}},l=n&&n.source;this._submit(h,l,i)},h.prototype.del=function(t,e){if("function"==typeof t&&(e=t,t=null),!this.type){var n=new o(4015,"Document does not exist");return e?e(n):this.emit("error",n)}var i=t&&t.source;this._submit({del:!0},i,e)},h.prototype.pause=function(){this.paused=!0},h.prototype.resume=function(){this.paused=!1,this.flush()},h.prototype._opAcknowledged=function(t){if(this.inflightOp.create)this.version=t.v;else if(t.v!==this.version)return r.warn("Invalid version from server. Expected: "+this.version+" Received: "+t.v,t),this.fetch();this.version++,this._clearInflightOp()},h.prototype._rollback=function(t){var e=this.inflightOp;if(e.op&&e.type.invert){e.op=e.type.invert(e.op);for(var n=0;n<this.pendingOps.length;n++){var i=c(this.pendingOps[n],e);if(i)return this._hardRollback(i)}try{this._otApply(e,!1)}catch(t){return this._hardRollback(t)}this._clearInflightOp(t)}else this._hardRollback(t)},h.prototype._hardRollback=function(t){var e=[];this.inflightOp&&e.push(this.inflightOp),e=e.concat(this.pendingOps),this._setType(null),this.version=null,this.inflightOp=null,this.pendingOps=[];var n=this;this.fetch((function(){for(var i=!!e.length,r=0;r<e.length;r++)i=p(e[r].callbacks,t)&&i;if(t&&!i)return n.emit("error",t)}))},h.prototype._clearInflightOp=function(t){var e=this.inflightOp;this.inflightOp=null;var n=p(e.callbacks,t);if(this.flush(),this._emitNothingPending(),t&&!n)return this.emit("error",t)}}).call(this,n(6))},function(t,e,n){(function(e){var i=n(1);function r(t,e,n,r,o,s,h){i.EventEmitter.call(this),this.action=t,this.connection=e,this.id=n,this.collection=r,this.query=o,this.results=null,s&&s.results&&(this.results=s.results,delete s.results),this.extra=void 0,this.options=s,this.callback=h,this.ready=!1,this.sent=!1}t.exports=r,i.mixin(r),r.prototype.hasPending=function(){return!this.ready},r.prototype.send=function(){if(this.connection.canSend){var t={a:this.action,id:this.id,c:this.collection,q:this.query};if(this.options&&(t.o=this.options),this.results){for(var e=[],n=0;n<this.results.length;n++){var i=this.results[n];e.push([i.id,i.version])}t.r=e}this.connection.send(t),this.sent=!0}},r.prototype.destroy=function(t){this.connection.canSend&&"qs"===this.action&&this.connection.send({a:"qu",id:this.id}),this.connection._destroyQuery(this),t&&e.nextTick(t)},r.prototype._onConnectionStateChanged=function(){this.connection.canSend&&!this.sent?this.send():this.sent=!1},r.prototype._handleFetch=function(t,e,n){this.connection._destroyQuery(this),this._handleResponse(t,e,n)},r.prototype._handleSubscribe=function(t,e,n){this._handleResponse(t,e,n)},r.prototype._handleResponse=function(t,e,n){var i=this.callback;if(this.callback=null,t)return this._finishResponse(t,i);if(!e)return this._finishResponse(null,i);var r=this,o=1,s=function(t){if(t)return r._finishResponse(t,i);--o||r._finishResponse(null,i)};if(Array.isArray(e))o+=e.length,this.results=this._ingestSnapshots(e,s),this.extra=n;else for(var h in e){o++;var l=e[h];this.connection.get(l.c||this.collection,h).ingestSnapshot(l,s)}s()},r.prototype._ingestSnapshots=function(t,e){for(var n=[],i=0;i<t.length;i++){var r=t[i],o=this.connection.get(r.c||this.collection,r.d);o.ingestSnapshot(r,e),n.push(o)}return n},r.prototype._finishResponse=function(t,e){if(this.emit("ready"),this.ready=!0,t)return this.connection._destroyQuery(this),e?e(t):this.emit("error",t);e&&e(null,this.results,this.extra)},r.prototype._handleError=function(t){this.emit("error",t)},r.prototype._handleDiff=function(t){for(var e=0;e<t.length;e++){"insert"===(n=t[e]).type&&(n.values=this._ingestSnapshots(n.values))}for(e=0;e<t.length;e++){var n;switch((n=t[e]).type){case"insert":var i=n.values;Array.prototype.splice.apply(this.results,[n.index,0].concat(i)),this.emit("insert",i,n.index);break;case"remove":var r=n.howMany||1,o=this.results.splice(n.index,r);this.emit("remove",o,n.index);break;case"move":r=n.howMany||1;var s=this.results.splice(n.from,r);Array.prototype.splice.apply(this.results,[n.to,0].concat(s)),this.emit("move",s,n.from,n.to)}}this.emit("changed",this.results)},r.prototype._handleExtra=function(t){this.extra=t,this.emit("extra",t)}}).call(this,n(6))},function(t,e,n){var i=n(57),r=n(1);function o(t,e,n,i,o){if(r.EventEmitter.call(this),"function"!=typeof o)throw new Error("Callback is required for SnapshotRequest");this.requestId=e,this.connection=t,this.id=i,this.collection=n,this.callback=o,this.sent=!1}t.exports=o,r.mixin(o),o.prototype.send=function(){this.connection.canSend&&(this.connection.send(this._message()),this.sent=!0)},o.prototype._onConnectionStateChanged=function(){this.connection.canSend?this.sent||this.send():this.sent=!1},o.prototype._handleResponse=function(t,e){if(this.emit("ready"),t)return this.callback(t);var n=e.meta?e.meta:null,r=new i(this.id,e.v,e.type,e.data,n);this.callback(null,r)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){window.ShareDB=n(51)},function(t,e,n){e.Connection=n(52),e.Doc=n(17),e.Error=n(8),e.Query=n(18),e.types=n(9),e.logger=n(7)},function(t,e,n){(function(e){var i=n(17),r=n(18),o=n(56),s=n(58),h=n(1),l=n(8),c=n(9),p=n(10),a=n(7);function u(t){return 0===t.readyState||1===t.readyState?"connecting":"disconnected"}function f(t){h.EventEmitter.call(this),this.collections={},this.nextQueryId=1,this.nextSnapshotRequestId=1,this.queries={},this._snapshotRequests={},this.seq=1,this.id=null,this.agent=null,this.debug=!1,this.state=u(t),this.bindToSocket(t)}function d(t){return t.hasPending()}function v(t){return t.hasWritePending()}t.exports=f,h.mixin(f),f.prototype.bindToSocket=function(t){this.socket&&(this.socket.close(),this.socket.onmessage=null,this.socket.onopen=null,this.socket.onerror=null,this.socket.onclose=null),this.socket=t;var n=u(t);this._setState(n),this.canSend=!1;var i=this;t.onmessage=function(t){try{var n="string"==typeof t.data?JSON.parse(t.data):t.data}catch(e){return void a.warn("Failed to parse message",t)}i.debug&&a.info("RECV",JSON.stringify(n));var r={data:n};if(i.emit("receive",r),r.data)try{i.handleMessage(r.data)}catch(t){e.nextTick((function(){i.emit("error",t)}))}},t.onopen=function(){i._setState("connecting")},t.onerror=function(t){i.emit("connection error",t)},t.onclose=function(t){"closed"===t||"Closed"===t?i._setState("closed",t):"stopped"===t||"Stopped by server"===t?i._setState("stopped",t):i._setState("disconnected",t)}},f.prototype.handleMessage=function(t){var e=null;switch(t.error&&((e=new Error(t.error.message)).code=t.error.code,e.data=t,delete t.error),t.a){case"init":return 1!==t.protocol?(e=new l(4019,"Invalid protocol version"),this.emit("error",e)):c.map[t.type]!==c.defaultType?(e=new l(4020,"Invalid default type"),this.emit("error",e)):"string"!=typeof t.id?(e=new l(4021,"Invalid client id"),this.emit("error",e)):(this.id=t.id,void this._setState("connected"));case"qf":return void((n=this.queries[t.id])&&n._handleFetch(e,t.data,t.extra));case"qs":return void((n=this.queries[t.id])&&n._handleSubscribe(e,t.data,t.extra));case"qu":return;case"q":var n;if(!(n=this.queries[t.id]))return;return e?n._handleError(e):(t.diff&&n._handleDiff(t.diff),void(t.hasOwnProperty("extra")&&n._handleExtra(t.extra)));case"bf":return this._handleBulkMessage(t,"_handleFetch");case"bs":return this._handleBulkMessage(t,"_handleSubscribe");case"bu":return this._handleBulkMessage(t,"_handleUnsubscribe");case"nf":case"nt":return this._handleSnapshotFetch(e,t);case"f":return void((i=this.getExisting(t.c,t.d))&&i._handleFetch(e,t.data));case"s":return void((i=this.getExisting(t.c,t.d))&&i._handleSubscribe(e,t.data));case"u":return void((i=this.getExisting(t.c,t.d))&&i._handleUnsubscribe(e));case"op":var i;return void((i=this.getExisting(t.c,t.d))&&i._handleOp(e,t));default:a.warn("Ignoring unrecognized message",t)}},f.prototype._handleBulkMessage=function(t,e){if(t.data)for(var n in t.data){(r=this.getExisting(t.c,n))&&r[e](t.error,t.data[n])}else if(Array.isArray(t.b))for(var i=0;i<t.b.length;i++){n=t.b[i];(r=this.getExisting(t.c,n))&&r[e](t.error)}else if(t.b)for(var n in t.b){var r;(r=this.getExisting(t.c,n))&&r[e](t.error)}else a.error("Invalid bulk message",t)},f.prototype._reset=function(){this.seq=1,this.id=null,this.agent=null},f.prototype._setState=function(t,e){if(this.state!==t){if("connecting"===t&&"disconnected"!==this.state&&"stopped"!==this.state&&"closed"!==this.state||"connected"===t&&"connecting"!==this.state){var n=new l(5007,"Cannot transition directly from "+this.state+" to "+t);return this.emit("error",n)}for(var i in this.state=t,this.canSend="connected"===t,"disconnected"!==t&&"stopped"!==t&&"closed"!==t||this._reset(),this.startBulk(),this.queries){this.queries[i]._onConnectionStateChanged()}for(var r in this.collections){var o=this.collections[r];for(var i in o)o[i]._onConnectionStateChanged()}for(var i in this._snapshotRequests){this._snapshotRequests[i]._onConnectionStateChanged()}this.endBulk(),this.emit(t,e),this.emit("state",t,e)}},f.prototype.startBulk=function(){this.bulk||(this.bulk={})},f.prototype.endBulk=function(){if(this.bulk)for(var t in this.bulk){var e=this.bulk[t];this._sendBulk("f",t,e.f),this._sendBulk("s",t,e.s),this._sendBulk("u",t,e.u)}this.bulk=null},f.prototype._sendBulk=function(t,e,n){if(n){var i,r=[],o={},s=0;for(var h in n){var l=n[h];null==l?r.push(h):(o[h]=l,i=h,s++)}if(1===r.length){h=r[0];this.send({a:t,c:e,d:h})}else r.length&&this.send({a:"b"+t,c:e,b:r});if(1===s){var c=o[i];this.send({a:t,c:e,d:i,v:c})}else s&&this.send({a:"b"+t,c:e,b:o})}},f.prototype._sendAction=function(t,e,n){if(this._addDoc(e),this.bulk){var i=this.bulk[e.collection]||(this.bulk[e.collection]={}),r=i[t]||(i[t]={}),o=r.hasOwnProperty(e.id);return r[e.id]=n,o}var s={a:t,c:e.collection,d:e.id,v:n};this.send(s)},f.prototype.sendFetch=function(t){return this._sendAction("f",t,t.version)},f.prototype.sendSubscribe=function(t){return this._sendAction("s",t,t.version)},f.prototype.sendUnsubscribe=function(t){return this._sendAction("u",t)},f.prototype.sendOp=function(t,e){this._addDoc(t);var n={a:"op",c:t.collection,d:t.id,v:t.version,src:e.src,seq:e.seq};e.op&&(n.op=e.op),e.create&&(n.create=e.create),e.del&&(n.del=e.del),this.send(n)},f.prototype.send=function(t){this.debug&&a.info("SEND",JSON.stringify(t)),this.emit("send",t),this.socket.send(JSON.stringify(t))},f.prototype.close=function(){this.socket.close()},f.prototype.getExisting=function(t,e){if(this.collections[t])return this.collections[t][e]},f.prototype.get=function(t,e){var n=this.collections[t]||(this.collections[t]={}),r=n[e];return r||(r=n[e]=new i(this,t,e),this.emit("doc",r)),r},f.prototype._destroyDoc=function(t){var e=this.collections[t.collection];e&&(delete e[t.id],p.hasKeys(e)||delete this.collections[t.collection])},f.prototype._addDoc=function(t){var e=this.collections[t.collection];e||(e=this.collections[t.collection]={}),e[t.id]!==t&&(e[t.id]=t)},f.prototype._createQuery=function(t,e,n,i,o){var s=this.nextQueryId++,h=new r(t,this,s,e,n,i,o);return this.queries[s]=h,h.send(),h},f.prototype._destroyQuery=function(t){delete this.queries[t.id]},f.prototype.createFetchQuery=function(t,e,n,i){return this._createQuery("qf",t,e,n,i)},f.prototype.createSubscribeQuery=function(t,e,n,i){return this._createQuery("qs",t,e,n,i)},f.prototype.hasPending=function(){return!!(this._firstDoc(d)||this._firstQuery(d)||this._firstSnapshotRequest())},f.prototype.hasWritePending=function(){return!!this._firstDoc(v)},f.prototype.whenNothingPending=function(t){var n=this._firstDoc(d);if(n)n.once("nothing pending",this._nothingPendingRetry(t));else{var i=this._firstQuery(d);if(i)i.once("ready",this._nothingPendingRetry(t));else{var r=this._firstSnapshotRequest();r?r.once("ready",this._nothingPendingRetry(t)):e.nextTick(t)}}},f.prototype._nothingPendingRetry=function(t){var n=this;return function(){e.nextTick((function(){n.whenNothingPending(t)}))}},f.prototype._firstDoc=function(t){for(var e in this.collections){var n=this.collections[e];for(var i in n){var r=n[i];if(t(r))return r}}},f.prototype._firstQuery=function(t){for(var e in this.queries){var n=this.queries[e];if(t(n))return n}},f.prototype._firstSnapshotRequest=function(){for(var t in this._snapshotRequests)return this._snapshotRequests[t]},f.prototype.fetchSnapshot=function(t,e,n,i){"function"==typeof n&&(i=n,n=null);var r=this.nextSnapshotRequestId++,s=new o(this,r,t,e,n,i);this._snapshotRequests[s.requestId]=s,s.send()},f.prototype.fetchSnapshotByTimestamp=function(t,e,n,i){"function"==typeof n&&(i=n,n=null);var r=this.nextSnapshotRequestId++,o=new s(this,r,t,e,n,i);this._snapshotRequests[o.requestId]=o,o.send()},f.prototype._handleSnapshotFetch=function(t,e){var n=this._snapshotRequests[e.id];n&&(delete this._snapshotRequests[e.id],n._handleResponse(t,e))}}).call(this,n(6))},function(t,e,n){"use strict";var i,r="object"==typeof Reflect?Reflect:null,o=r&&"function"==typeof r.apply?r.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};i=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!=t};function h(){h.init.call(this)}t.exports=h,h.EventEmitter=h,h.prototype._events=void 0,h.prototype._eventsCount=0,h.prototype._maxListeners=void 0;var l=10;function c(t){return void 0===t._maxListeners?h.defaultMaxListeners:t._maxListeners}function p(t,e,n,i){var r,o,s,h;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]),void 0===s)s=o[e]=n,++t._eventsCount;else if("function"==typeof s?s=o[e]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),(r=c(t))>0&&s.length>r&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=s.length,h=l,console&&console.warn&&console.warn(h)}return t}function a(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,o(this.listener,this.target,t))}function u(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=a.bind(i);return r.listener=n,i.wrapFn=r,r}function f(t,e,n){var i=t._events;if(void 0===i)return[];var r=i[e];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(r):v(r,r.length)}function d(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function v(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}Object.defineProperty(h,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");l=t}}),h.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},h.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},h.prototype.getMaxListeners=function(){return c(this)},h.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i="error"===t,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var h=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw h.context=s,h}var l=r[t];if(void 0===l)return!1;if("function"==typeof l)o(l,this,e);else{var c=l.length,p=v(l,c);for(n=0;n<c;++n)o(p[n],this,e)}return!0},h.prototype.addListener=function(t,e){return p(this,t,e,!1)},h.prototype.on=h.prototype.addListener,h.prototype.prependListener=function(t,e){return p(this,t,e,!0)},h.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.on(t,u(this,t,e)),this},h.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.prependListener(t,u(this,t,e)),this},h.prototype.removeListener=function(t,e){var n,i,r,o,s;if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);if(void 0===(i=this._events))return this;if(void 0===(n=i[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(r=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){s=n[o].listener,r=o;break}if(r<0)return this;0===r?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,r),1===n.length&&(i[t]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",t,s||e)}return this},h.prototype.off=h.prototype.removeListener,h.prototype.removeAllListeners=function(t){var e,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},h.prototype.listeners=function(t){return f(this,t,!0)},h.prototype.rawListeners=function(t){return f(this,t,!1)},h.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):d.call(t,e)},h.prototype.listenerCount=d,h.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},function(t,e){var n=["info","warn","error"];function i(){var t={};n.forEach((function(e){t[e]=console[e].bind(console)})),this.setMethods(t)}t.exports=i,i.prototype.setMethods=function(t){t=t||{};var e=this;n.forEach((function(n){"function"==typeof t[n]&&(e[n]=t[n])}))}},function(t,e,n){"use strict";var i="undefined"!=typeof Reflect?Reflect.construct:void 0,r=Object.defineProperty,o=Error.captureStackTrace;function s(t){void 0!==t&&r(this,"message",{configurable:!0,value:t,writable:!0});var e=this.constructor.name;void 0!==e&&e!==this.name&&r(this,"name",{configurable:!0,value:e,writable:!0}),o(this,this.constructor)}void 0===o&&(o=function(t){var e=new Error;r(t,"stack",{configurable:!0,get:function(){var t=e.stack;return r(this,"stack",{configurable:!0,value:t,writable:!0}),t},set:function(e){r(t,"stack",{configurable:!0,value:e,writable:!0})}})}),s.prototype=Object.create(Error.prototype,{constructor:{configurable:!0,value:s,writable:!0}});var h=function(){function t(t,e){return r(t,"name",{configurable:!0,value:e})}try{var e=function(){};if(t(e,"foo"),"foo"===e.name)return t}catch(t){}}();(t.exports=function(t,e){if(null==e||e===Error)e=s;else if("function"!=typeof e)throw new TypeError("super_ should be a function");var n;if("string"==typeof t)n=t,t=void 0!==i?function(){return i(e,arguments,this.constructor)}:function(){e.apply(this,arguments)},void 0!==h&&(h(t,n),n=void 0);else if("function"!=typeof t)throw new TypeError("constructor should be either a string or a function");t.super_=t.super=e;var r={constructor:{configurable:!0,value:t,writable:!0}};return void 0!==n&&(r.name={configurable:!0,value:n,writable:!0}),t.prototype=Object.create(e.prototype,r),t}).BaseError=s},function(t,e,n){var i=n(19),r=n(10);function o(t,e,n,o,s,h){if(i.call(this,t,e,n,o,h),!r.isValidVersion(s))throw new Error("Snapshot version must be a positive integer or null");this.version=s}t.exports=o,o.prototype=Object.create(i.prototype),o.prototype._message=function(){return{a:"nf",id:this.requestId,c:this.collection,d:this.id,v:this.version}}},function(t,e){t.exports=function(t,e,n,i,r){this.id=t,this.v=e,this.type=n,this.data=i,this.m=r}},function(t,e,n){var i=n(19),r=n(10);function o(t,e,n,o,s,h){if(i.call(this,t,e,n,o,h),!r.isValidTimestamp(s))throw new Error("Snapshot timestamp must be a positive integer or null");this.timestamp=s}t.exports=o,o.prototype=Object.create(i.prototype),o.prototype._message=function(){return{a:"nt",id:this.requestId,c:this.collection,d:this.id,ts:this.timestamp}}}]);