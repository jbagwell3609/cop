if(!document)var document={cookie:""};var ObjectId=function(){function setMachineCookie(){var cookieList=document.cookie.split("; ");for(var i in cookieList){var cookie=cookieList[i].split("="),cookieMachineId=parseInt(cookie[1],10);if("mongoMachineId"==cookie[0]&&cookieMachineId&&0<=cookieMachineId&&cookieMachineId<=16777215){machine=cookieMachineId;break}}document.cookie="mongoMachineId="+machine+";expires=Tue, 19 Jan 2038 05:00:00 GMT;path=/"}var increment=Math.floor(16777216*Math.random()),pid=Math.floor(65536*Math.random()),machine=Math.floor(16777216*Math.random());if("undefined"!=typeof localStorage)try{var mongoMachineId=parseInt(localStorage.mongoMachineId);0<=mongoMachineId&&mongoMachineId<=16777215&&(machine=Math.floor(localStorage.mongoMachineId)),localStorage.mongoMachineId=machine}catch(e){setMachineCookie()}else setMachineCookie();return function(){if(!(this instanceof ObjectId))return new ObjectId(arguments[0],arguments[1],arguments[2],arguments[3]).toString();"object"==typeof arguments[0]?(this.timestamp=arguments[0].timestamp,this.machine=arguments[0].machine,this.pid=arguments[0].pid,this.increment=arguments[0].increment):"string"==typeof arguments[0]&&24==arguments[0].length?(this.timestamp=Number("0x"+arguments[0].substr(0,8)),this.machine=Number("0x"+arguments[0].substr(8,6)),this.pid=Number("0x"+arguments[0].substr(14,4)),this.increment=Number("0x"+arguments[0].substr(18,6))):4==arguments.length&&null!=arguments[0]?(this.timestamp=arguments[0],this.machine=arguments[1],this.pid=arguments[2],this.increment=arguments[3]):(this.timestamp=Math.floor((new Date).valueOf()/1e3),this.machine=machine,this.pid=pid,this.increment=increment++,16777215<increment&&(increment=0))}}();ObjectId.prototype.getDate=function(){return new Date(1e3*this.timestamp)},ObjectId.prototype.toArray=function(){var i,strOid=this.toString(),array=[];for(i=0;i<12;i++)array[i]=parseInt(strOid.slice(2*i,2*i+2),16);return array},ObjectId.prototype.toString=function(){if(void 0===this.timestamp||void 0===this.machine||void 0===this.pid||void 0===this.increment)return"Invalid ObjectId";var timestamp=this.timestamp.toString(16),machine=this.machine.toString(16),pid=this.pid.toString(16),increment=this.increment.toString(16);return"00000000".substr(0,8-timestamp.length)+timestamp+"000000".substr(0,6-machine.length)+machine+"0000".substr(0,4-pid.length)+pid+"000000".substr(0,6-increment.length)+increment};
